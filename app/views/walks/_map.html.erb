<script>

  function initMap() {
    var map = new google.maps.Map(document.getElementById('map'), {
      zoom: 5,
      center: new google.maps.LatLng(0, 0)
    });

    var bounds = new google.maps.LatLngBounds(); 

    <% @walks.each_with_index do |walk, index| %>
    var myLatLng = new google.maps.LatLng(
      <%= walk.location.latitude %>, <%= walk.location.longitude %>);
    var marker   = new google.maps.Marker({
      position: myLatLng,
      map: map,
      title: 'hi, something',
      zIndex: <%= index %>
    });
      bounds.extend(myLatLng);   
      <% end %>
      map.fitBounds(bounds);
    }

</script>

<script async defer
        src="https://maps.googleapis.com/maps/api/js?signed_in=true&callback=initMap"></script>

<div id="map"></div>